{"ast":null,"code":"import _regeneratorRuntime from\"D:/CFD/react JS/react-cfd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/CFD/react JS/react-cfd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/CFD/react JS/react-cfd/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{forwardRef,useImperativeHandle,useRef,useState}from'react';import reactDom from'react-dom';import useAuth from'../core/useAuth';import useFormValidate from'../core/useFormValidate';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default/*#__PURE__*/forwardRef(function Login(props,ref){var _useState=useState(),_useState2=_slicedToArray(_useState,2),formError=_useState2[0],setFormError=_useState2[1];var _useAuth=useAuth(),handleLogin=_useAuth.handleLogin;var _useFormValidate=useFormValidate({username:'',password:''},{rule:{username:{required:true,pattern:\"email\"},password:{required:true}},message:{username:{required:true,pattern:\"\"}}}),form=_useFormValidate.form,error=_useFormValidate.error,inputChange=_useFormValidate.inputChange,check=_useFormValidate.check;var divRef=useRef();useImperativeHandle(ref,function(){return{open:open,close:close};},[]);function open(){divRef.current.style.display='flex';}function close(){divRef.current.style.display='none';}function _login(){return _login2.apply(this,arguments);}function _login2(){_login2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var error,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:error=check();if(!(Object.keys(error).length===0)){_context.next=6;break;}_context.next=4;return handleLogin(form);case 4:res=_context.sent;if(res===null||res===void 0?void 0:res.error){setFormError(res.error);}else{close();}case 6:case\"end\":return _context.stop();}}},_callee);}));return _login2.apply(this,arguments);}return/*#__PURE__*/reactDom.createPortal(/*#__PURE__*/_jsx(\"div\",{className:\"popup-form popup-login\",id:\"popupLogin\",ref:divRef,style:{display:'none'},children:/*#__PURE__*/_jsxs(\"div\",{className:\"wrap\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"ct_login\",style:{display:'block'},children:[/*#__PURE__*/_jsx(\"h2\",{className:\"title\",children:\"\\u0110\\u0103ng nh\\u1EADp\"}),formError?/*#__PURE__*/_jsx(\"h2\",{style:{color:'red',textAlign:'center',marginBottom:20},children:formError}):\"\",/*#__PURE__*/_jsxs(\"div\",{style:{position:'relative'},children:[/*#__PURE__*/_jsx(\"label\",{children:/*#__PURE__*/_jsx(\"input\",{name:\"username\",value:form.username,onChange:inputChange,type:\"text\",placeholder:\"Email / S\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i\"})}),error.username&&/*#__PURE__*/_jsx(\"p\",{className:\" errorLogin\",children:error.username})]}),/*#__PURE__*/_jsxs(\"div\",{style:{position:'relative'},children:[/*#__PURE__*/_jsx(\"label\",{children:/*#__PURE__*/_jsx(\"input\",{name:\"password\",value:form.password,onChange:inputChange,type:\"password\",placeholder:\"M\\u1EADt kh\\u1EA9u\"})}),error.password&&/*#__PURE__*/_jsx(\"p\",{className:\" errorLogin\",children:error.password})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"remember\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"btn-remember\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\"})}),/*#__PURE__*/_jsx(\"p\",{children:\"Nh\\u1EDB m\\u1EADt kh\\u1EA9u\"})]}),/*#__PURE__*/_jsx(\"a\",{href:\"#\",className:\"forget\",children:\"Qu\\xEAn m\\u1EADt kh\\u1EA9u?\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"btn rect main btn-login\",onClick:_login,children:\"\\u0111\\u0103ng nh\\u1EADp\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-register\",style:{},children:/*#__PURE__*/_jsx(\"strong\",{children:\"ho\\u1EB7c \\u0111\\u0103ng k\\xFD b\\u1EB1ng\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"btn btn-icon rect white btn-google\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"/img/google.svg\",alt:true}),\"Google\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"close\",children:/*#__PURE__*/_jsx(\"img\",{src:\"/img/close-icon.png\",alt:true})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"ct_email\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"title\",children:\"\\u0110\\u1EB7t l\\u1EA1i m\\u1EADt kh\\u1EA9u\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Email\"}),/*#__PURE__*/_jsx(\"div\",{className:\"btn rect main btn-next\",children:\"Ti\\u1EBFp theo\"}),/*#__PURE__*/_jsx(\"div\",{className:\"back\"}),/*#__PURE__*/_jsx(\"div\",{className:\"close\",children:/*#__PURE__*/_jsx(\"img\",{src:\"/img/close-icon.png\",alt:true})})]})]})}),document.getElementById('root2'));});","map":{"version":3,"sources":["D:/CFD/react JS/react-cfd/src/components/Login.jsx"],"names":["React","forwardRef","useImperativeHandle","useRef","useState","reactDom","useAuth","useFormValidate","Login","props","ref","formError","setFormError","handleLogin","username","password","rule","required","pattern","message","form","error","inputChange","check","divRef","open","close","current","style","display","_login","Object","keys","length","res","createPortal","color","textAlign","marginBottom","position","document","getElementById"],"mappings":"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","sourcesContent":["import React, { forwardRef, useImperativeHandle, useRef, useState } from 'react'\r\nimport reactDom from 'react-dom'\r\nimport useAuth from '../core/useAuth'\r\nimport useFormValidate from '../core/useFormValidate'\r\n\r\nexport default forwardRef(function Login(props, ref) {\r\n\r\n    let [formError, setFormError] = useState()\r\n\r\n\r\n\r\n\r\n    let { handleLogin } = useAuth()\r\n\r\n    let { form, error, inputChange, check } = useFormValidate({\r\n        username: '',\r\n        password: ''\r\n    }, {\r\n        rule: {\r\n            username: {\r\n                required: true,\r\n                pattern: \"email\"\r\n            },\r\n            password: {\r\n                required: true,\r\n\r\n            }\r\n        },\r\n        message: {\r\n            username: {\r\n                required: true,\r\n                pattern: \"\"\r\n            }\r\n        },\r\n\r\n    })\r\n\r\n\r\n\r\n\r\n\r\n    let divRef = useRef()\r\n\r\n    useImperativeHandle(ref, () => {\r\n        return {\r\n            open,\r\n            close\r\n        }\r\n    }, [])\r\n\r\n\r\n\r\n    function open() {\r\n        divRef.current.style.display = 'flex'\r\n    }\r\n\r\n    function close() {\r\n        divRef.current.style.display = 'none'\r\n    }\r\n\r\n    async function _login() {\r\n        let error = check();\r\n\r\n        if (Object.keys(error).length === 0) {\r\n            let res = await handleLogin(form)\r\n            if (res?.error) {\r\n                setFormError(res.error)\r\n            }\r\n            else {\r\n                close()\r\n            }\r\n\r\n\r\n        }\r\n    }\r\n\r\n\r\n\r\n    return reactDom.createPortal(\r\n        <div className=\"popup-form popup-login\" id='popupLogin' ref={divRef} style={{ display: 'none' }}>\r\n            <div className=\"wrap\">\r\n                {/* login-form */}\r\n                <div className=\"ct_login\" style={{ display: 'block' }}>\r\n                    <h2 className=\"title\">Đăng nhập</h2>\r\n                    {\r\n                        formError ? <h2 style={{ color: 'red', textAlign: 'center', marginBottom: 20 }} >{formError}</h2> : \"\"\r\n                    }\r\n                    <div style={{ position: 'relative' }}>\r\n                        <label>\r\n                            <input name='username' value={form.username} onChange={inputChange} type=\"text\" placeholder=\"Email / Số điện thoại\" />\r\n                        </label>\r\n                        {error.username && <p className=\" errorLogin\">{error.username}</p>}\r\n                    </div>\r\n\r\n                    <div style={{ position: 'relative' }}>\r\n                        <label>\r\n                            <input name='password' value={form.password} onChange={inputChange} type=\"password\" placeholder=\"Mật khẩu\" />\r\n                        </label>\r\n                        {error.password && <p className=\" errorLogin\">{error.password}</p>}\r\n                    </div>\r\n\r\n\r\n                    <div className=\"remember\">\r\n                        <label className=\"btn-remember\">\r\n                            <div>\r\n                                <input type=\"checkbox\" />\r\n                            </div>\r\n                            <p>Nhớ mật khẩu</p>\r\n                        </label>\r\n                        <a href=\"#\" className=\"forget\">Quên mật khẩu?</a>\r\n                    </div>\r\n                    <div className=\"btn rect main btn-login\" onClick={_login}>đăng nhập</div>\r\n                    <div className=\"text-register\" style={{}}>\r\n                        <strong>hoặc đăng ký bằng</strong>\r\n                    </div>\r\n                    <div>\r\n                        <div className=\"btn btn-icon rect white btn-google\">\r\n                            <img src=\"/img/google.svg\" alt />\r\n          Google\r\n        </div>\r\n                    </div>\r\n                    <div className=\"close\">\r\n                        <img src=\"/img/close-icon.png\" alt />\r\n                    </div>\r\n                </div>\r\n                {/* email form */}\r\n                <div className=\"ct_email\">\r\n                    <h2 className=\"title\">Đặt lại mật khẩu</h2>\r\n                    <input type=\"text\" placeholder=\"Email\" />\r\n                    <div className=\"btn rect main btn-next\">Tiếp theo</div>\r\n                    <div className=\"back\" />\r\n                    <div className=\"close\">\r\n                        <img src=\"/img/close-icon.png\" alt />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>,\r\n        document.getElementById('root2')\r\n    )\r\n})\r\n\r\n"]},"metadata":{},"sourceType":"module"}